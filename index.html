<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kia Avtomobillar - O'zbekiston</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <style>
        :root {
            --kia-red: #1b1919;
            --kia-dark: #001a48;
            --kia-light: #F5F5F5;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
        }
        
        .navbar {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .navbar-brand img {
            height: 40px;
        }
        
        .nav-link {
            color: var(--kia-dark) !important;
            font-weight: 500;
            transition: color 0.3s;
        }
        
        .nav-link:hover {
            color: var(--kia-red) !important;
        }
        
        .hero-section {
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('k5_bg.jpg');
            background-size: cover;
            background-image: url("k5_bg.jpg");
            background-position: center;
            color: white;
            padding: 100px 0;
            margin-bottom: 40px;
        }
        
        .car-card {
            transition: transform 0.3s, box-shadow 0.3s;
            margin-bottom: 20px;
            border: none;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        .car-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .car-card img {
            height: 200px;
            object-fit: cover;
            width: 100%;
        }
        
        .btn-kia {
            background-color: var(--kia-red);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        .btn-kia:hover {
            background-color: #018d08;
            color: white;
        }
        
        .model-info {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
        }
        
        .order-form {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }
        
        footer {
            background-color: var(--kia-dark);
            color: white;
            padding: 40px 0;
            margin-top: 50px;
        }
        
        .admin-panel {
            background-color: #f8f9fa;
            min-height: 100vh;
            padding-top: 20px;
            display: none;
        }
        
        .admin-sidebar {
            background-color: var(--kia-dark);
            color: white;
            min-height: 100vh;
            padding-top: 20px;
        }
        
        .admin-content {
            padding: 20px;
        }
        
        .car-detail-img {
            width: 100%;
            border-radius: 10px;
            margin-bottom: 20px;
            max-height: 400px;
            object-fit: cover;
        }
        
        .login-container {
            max-width: 400px;
            margin: 100px auto;
            padding: 30px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
        }
        
        .admin-nav-link {
            color: rgba(255, 255, 255, 0.8) !important;
            padding: 12px 20px;
            margin: 5px 0;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .admin-nav-link:hover, .admin-nav-link.active {
            background-color: rgba(255, 255, 255, 0.1);
            color: white !important;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            margin-bottom: 20px;
        }
        
        .image-preview {
            max-width: 100%;
            max-height: 200px;
            margin-top: 10px;
            border-radius: 5px;
            display: none;
        }
        
        #loadingIndicator {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(189, 49, 49, 0.7);
            z-index: 9999;
            justify-content: center;
            align-items: center;
        }
        
        .spinner-border {
            width: 3rem;
            height: 3rem;
        }
    </style>
</head>
<body>
    <!-- Yuklash ko'rsatkichi -->
    <div id="loadingIndicator">
        <div class="text-center text-white">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Yuklanmoqda...</span>
            </div>
            <p class="mt-2" id="loadingText">Yuklanmoqda...</p>
        </div>
    </div>

    <!-- Asosiy navigatsiya -->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <img src="https://www.kia.com/content/dam/kia2/uz/en/footer-ci-symbol.svg" alt="Kia Logo" id="siteLogo">
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#" onclick="showMainPage()">Bosh sahifa</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="modelsDropdown" role="button" data-bs-toggle="dropdown">
                            Modellar
                        </a>
                        <ul class="dropdown-menu" aria-labelledby="modelsDropdown" id="modelsDropdownMenu">
                            <!-- Modellar dinamik ravishda yuklanadi -->
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Xizmatlar</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Aloqa</a>
                    </li>
                </ul>
                <div>
                    <button class="btn btn-outline-danger me-2" onclick="openLoginModal()">Kirish</button>
                    <button class="btn btn-kia" data-bs-toggle="modal" data-bs-target="#testDriveModal">Test Drive</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Asosiy sahifa kontenti -->
    <div id="mainContent">
        <!-- Hero qismi -->
        <section class="hero-section text-center">
            <div class="container">
                <h1 class="display-4 fw-bold mb-4" id="mainTitle">Kia - Har bir safaringizga ishonch</h1>
                <p class="lead mb-4" id="mainDescription">Zamonaviy dizayn, qulaylik va yuqori texnologiyalar birlashgan avtomobillar</p>
                <button class="btn btn-kia btn-lg" onclick="scrollToModels()">Modellarni ko'rish</button>
            </div>
        </section>

        <!-- Modellar bo'limi -->
        <section class="container mb-5" id="modelsSection">
            <h2 class="text-center mb-4">Kia Modellari</h2>
            <div class="row" id="modelsContainer">
                <!-- Modellar dinamik ravishda yuklanadi -->
            </div>
        </section>

        <!-- Model ma'lumotlari bo'limi -->
        <section class="container mb-5" id="modelInfoSection" style="display: none;">
            <div class="model-info">
                <div class="row">
                    <div class="col-md-6">
                        <img id="modelDetailImage" src="" alt="Model image" class="car-detail-img">
                    </div>
                    <div class="col-md-6">
                        <h2 id="modelName"></h2>
                        <p id="modelDescription" class="lead"></p>
                        <div class="row mb-3">
                            <div class="col-6">
                                <strong>Narxi:</strong> <span id="modelPrice"></span>
                            </div>
                            <div class="col-6">
                                <strong>Ishlab chiqarilgan:</strong> <span id="modelYear"></span>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-6">
                                <strong>Dvigatel:</strong> <span id="modelEngine"></span>
                            </div>
                            <div class="col-6">
                                <strong>Uzatmalar qutisi:</strong> <span id="modelTransmission"></span>
                            </div>
                        </div>
                        <button class="btn btn-kia mt-3" data-bs-toggle="modal" data-bs-target="#orderModal">Buyurtma berish</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer>
            <div class="container">
                <div class="row">
                    <div class="col-md-4">
                        <h5>Kia G'ijduvon</h5>
                        <p>Bizning maqsadimiz - eng yaxshi xizmat va sifatli avtomobillarni taqdim etish.</p>
                    </div>
                    <div class="col-md-4">
                        <h5>Bog'lanish</h5>
                        <p><i class="fas fa-map-marker-alt me-2"></i> Toshkent sh., Yunusobod tumani</p>
                        <p><i class="fas fa-phone me-2"></i> +998 71 200 00 00</p>
                        <p><i class="fas fa-envelope me-2"></i> info@kia.uz</p>
                    </div>
                    <div class="col-md-4">
                        <h5>Bizni kuzatib boring</h5>
                        <div class="d-flex gap-3 mt-3">
                            <a href="#" class="text-light"><i class="fab fa-facebook-f fa-lg"></i></a>
                            <a href="#" class="text-light"><i class="fab fa-instagram fa-lg"></i></a>
                            <a href="#" class="text-light"><i class="fab fa-telegram fa-lg"></i></a>
                            <a href="#" class="text-light"><i class="fab fa-youtube fa-lg"></i></a>
                        </div>
                    </div>
                </div>
                <hr class="mt-4 mb-4" style="background-color: rgba(255,255,255,0.2)">
                <div class="text-center">
                    <p>© 2025 Kia G'ijduvon. Barcha huquqlar himoyalangan.</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Admin paneli -->
    <div class="admin-panel" id="adminPanel">
        <!-- Sarlavha qismi -->
        <header class="admin-header">
            <div class="container-fluid">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                        <img src="kia_log.png" alt="Kia Logo" height="30" class="me-2">
                        <h4 class="mb-0">Kia Admin Paneli</h4>
                    </div>
                    <div>
                        <span class="me-3" id="adminUserName">Admin</span>
                        <button class="btn btn-outline-light btn-sm" onclick="logout()">Chiqish</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Asosiy kontent -->
        <div class="container-fluid">
            <div class="row">
                <!-- Sidebar -->
                <div class="col-md-2 admin-sidebar">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link admin-nav-link active" href="#" onclick="showAdminSection('dashboard')">
                                <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link admin-nav-link" href="#" onclick="showAdminSection('cars')">
                                <i class="fas fa-car me-2"></i> Avtomobillar
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link admin-nav-link" href="#" onclick="showAdminSection('orders')">
                                <i class="fas fa-list me-2"></i> Buyurtmalar
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link admin-nav-link" href="#" onclick="showAdminSection('content')">
                                <i class="fas fa-edit me-2"></i> Kontentni boshqarish
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link admin-nav-link" href="#" onclick="showAdminSection('settings')">
                                <i class="fas fa-cog me-2"></i> Sozlamalar
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Kontent -->
                <div class="col-md-10 admin-content">
                    <!-- Dashboard -->
                    <div id="adminDashboardSection">
                        <h3 class="mb-4">Dashboard</h3>
                        <div class="row">
                            <div class="col-md-3">
                                <div class="stat-card text-center">
                                    <i class="fas fa-car fa-2x text-primary mb-2"></i>
                                    <h4 id="totalCars">0</h4>
                                    <p class="text-muted">Jami avtomobillar</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card text-center">
                                    <i class="fas fa-list fa-2x text-success mb-2"></i>
                                    <h4 id="totalOrders">0</h4>
                                    <p class="text-muted">Jami buyurtmalar</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card text-center">
                                    <i class="fas fa-check-circle fa-2x text-info mb-2"></i>
                                    <h4 id="confirmedOrders">0</h4>
                                    <p class="text-muted">Tasdiqlangan buyurtmalar</p>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="stat-card text-center">
                                    <i class="fas fa-clock fa-2x text-warning mb-2"></i>
                                    <h4 id="pendingOrders">0</h4>
                                    <p class="text-muted">Kutilayotgan buyurtmalar</p>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-4">
                            <div class="col-md-6">
                                <div class="stat-card">
                                    <h5 class="mb-3">So'ngi buyurtmalar</h5>
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>Ism</th>
                                                    <th>Model</th>
                                                    <th>Sana</th>
                                                </tr>
                                            </thead>
                                            <tbody id="recentOrders">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="stat-card">
                                    <h5 class="mb-3">Ko'p sotilgan modellar</h5>
                                    <div id="popularModels">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Avtomobillar boshqaruvi -->
                    <div id="adminCarsSection" style="display: none;">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h3>Avtomobillar boshqaruvi</h3>
                            <button class="btn btn-kia" data-bs-toggle="modal" data-bs-target="#addCarModal">
                                <i class="fas fa-plus me-2"></i>Yangi avtomobil
                            </button>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Rasm</th>
                                        <th>Model</th>
                                        <th>Narx</th>
                                        <th>Yil</th>
                                        <th>Holat</th>
                                        <th>Harakatlar</th>
                                    </tr>
                                </thead>
                                <tbody id="adminCarsList">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Buyurtmalar -->
                    <div id="adminOrdersSection" style="display: none;">
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h3>Buyurtmalar</h3>
                            <div>
                                <button class="btn btn-kia me-2" onclick="exportToExcel()">
                                    <i class="fas fa-download me-2"></i>Excelga yuklab olish
                                </button>
                                <button class="btn btn-outline-secondary" onclick="exportToCSV()">
                                    <i class="fas fa-file-csv me-2"></i>CSV ga yuklab olish
                                </button>
                            </div>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-striped">
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>Ism</th>
                                        <th>Telefon</th>
                                        <th>Email</th>
                                        <th>Model</th>
                                        <th>Sana</th>
                                        <th>Holati</th>
                                        <th>Harakatlar</th>
                                    </tr>
                                </thead>
                                <tbody id="adminOrdersList">
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Kontentni boshqarish -->
                    <div id="adminContentSection" style="display: none;">
                        <h3 class="mb-4">Kontentni boshqarish</h3>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="stat-card">
                                    <h5 class="mb-3">Bosh sahifa kontenti</h5>
                                    <form id="contentForm">
                                        <div class="mb-3">
                                            <label class="form-label">Sarlavha</label>
                                            <input type="text" class="form-control" id="mainTitleInput" value="Kia - Har bir safaringizga ishonch">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Qisqa tavsif</label>
                                            <textarea class="form-control" id="mainDescriptionInput" rows="3">Zamonaviy dizayn, qulaylik va yuqori texnologiyalar birlashgan avtomobillar</textarea>
                                        </div>
                                        <button type="button" class="btn btn-kia" onclick="saveContent()">Saqlash</button>
                                    </form>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="stat-card">
                                    <h5 class="mb-3">Logo yangilash</h5>
                                    <div class="mb-3">
                                        <label class="form-label">Joriy logo</label>
                                        <div>
                                            <img src="https://www.kia.com/content/dam/kia2/uz/en/footer-ci-symbol.svg" height="40" id="currentLogo">
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Yangi logo</label>
                                        <input type="file" class="form-control" id="newLogoInput" accept="image/*">
                                        <div class="form-text">Logo faylini yuklang (JPG, PNG yoki SVG)</div>
                                        <img id="newLogoPreview" class="image-preview mt-2">
                                    </div>
                                    <button type="button" class="btn btn-kia" onclick="uploadLogo()">Yuklash</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sozlamalar -->
                    <div id="adminSettingsSection" style="display: none;">
                        <h3 class="mb-4">Sozlamalar</h3>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="stat-card">
                                    <h5 class="mb-3">Profil sozlamalari</h5>
                                    <form id="profileForm">
                                        <div class="mb-3">
                                            <label class="form-label">Ism</label>
                                            <input type="text" class="form-control" id="adminNameInput" value="Admin">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Email</label>
                                            <input type="email" class="form-control" id="adminEmailInput" value="admin@kia.uz">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Telefon</label>
                                            <input type="tel" class="form-control" id="adminPhoneInput" value="+998901234567">
                                        </div>
                                        <button type="button" class="btn btn-kia" onclick="saveProfile()">Saqlash</button>
                                    </form>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="stat-card">
                                    <h5 class="mb-3">Parolni yangilash</h5>
                                    <form id="passwordForm">
                                        <div class="mb-3">
                                            <label class="form-label">Joriy parol</label>
                                            <input type="password" class="form-control" id="currentPasswordInput">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Yangi parol</label>
                                            <input type="password" class="form-control" id="newPasswordInput">
                                        </div>
                                        <div class="mb-3">
                                            <label class="form-label">Yangi parolni tasdiqlang</label>
                                            <input type="password" class="form-control" id="confirmPasswordInput">
                                        </div>
                                        <button type="button" class="btn btn-kia" onclick="changePassword()">Yangilash</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Buyurtma berish modali -->
    <div class="modal fade" id="orderModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Buyurtma qoldirish</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="orderForm">
                        <input type="hidden" id="selectedCarModel" value="">
                        <div class="mb-3">
                            <label for="customerName" class="form-label">Ismingiz</label>
                            <input type="text" class="form-control" id="customerName" required>
                        </div>
                        <div class="mb-3">
                            <label for="customerPhone" class="form-label">Telefon raqami</label>
                            <input type="tel" class="form-control" id="customerPhone" required>
                        </div>
                        <div class="mb-3">
                            <label for="customerEmail" class="form-label">Email manzil</label>
                            <input type="email" class="form-control" id="customerEmail">
                        </div>
                        <div class="mb-3">
                            <label for="customerComment" class="form-label">Qo'shimcha izoh</label>
                            <textarea class="form-control" id="customerComment" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Bekor qilish</button>
                    <button type="button" class="btn btn-kia" onclick="submitOrder()">Buyurtma berish</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin kirish modali -->
    <div class="modal fade" id="loginModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Admin kirish</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="loginForm">
                        <div class="mb-3">
                            <label for="adminLogin" class="form-label">Login</label>
                            <input type="text" class="form-control" id="adminLogin" required>
                        </div>
                        <div class="mb-3">
                            <label for="adminPassword" class="form-label">Parol</label>
                            <input type="password" class="form-control" id="adminPassword" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Bekor qilish</button>
                    <button type="button" class="btn btn-kia" onclick="adminLogin()">Kirish</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Yangi avtomobil qo'shish modali -->
    <div class="modal fade" id="addCarModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Yangi avtomobil qo'shish</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addCarForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Model nomi</label>
                                    <input type="text" class="form-control" id="carName" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Narx</label>
                                    <input type="text" class="form-control" id="carPrice" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Ishlab chiqarilgan yili</label>
                                    <input type="number" class="form-control" id="carYear" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Dvigatel</label>
                                    <input type="text" class="form-control" id="carEngine" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">Uzatmalar qutisi</label>
                                    <select class="form-select" id="carTransmission" required>
                                        <option value="">Tanlang</option>
                                        <option value="Avtomat">Avtomat</option>
                                        <option value="Mexanik">Mexanik</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Rangi</label>
                                    <input type="text" class="form-control" id="carColor" required>
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Rasm</label>
                                    <input type="file" class="form-control" id="carImageUpload" accept="image/*" required>
                                    <div class="form-text">Avtomobil rasmini yuklang (JPG, PNG yoki GIF)</div>
                                    <img id="carImagePreview" class="image-preview mt-2">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">Tavsif</label>
                                    <textarea class="form-control" id="carDescription" rows="4" required></textarea>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Bekor qilish</button>
                    <button type="button" class="btn btn-kia" onclick="addCar()">Qo'shish</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Dastur o'zgaruvchilari
        let cars = JSON.parse(localStorage.getItem('kiaCars')) || [
            {
                id: 1,
                name: "Sportage",
                price: "$28,000",
                year: "2023",
                engine: "2.5L I4",
                transmission: "Avtomat",
                color: "Qora",
                image: "https://images.unsplash.com/photo-1621135802920-133df287f89c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                description: "Yangi Kia Sportage - bu mukammal shaharlararo krossover bo'lib, u zamonaviy dizayn, qulaylik va yuqori texnologiyalarni birlashtiradi."
            },
            {
                id: 2,
                name: "Sorento",
                price: "$32,000",
                year: "2023",
                engine: "3.5L V6",
                transmission: "Avtomat",
                color: "Oq",
                image: "https://images.unsplash.com/photo-1621135803036-9a2c3ca5ef6a?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80",
                description: "Kia Sorento - bu keng oilaviy krossover bo'lib, uning ichki qismi juda qulay va zamonaviy texnologiyalar bilan jihozlangan."
            }
        ];
        
        let orders = JSON.parse(localStorage.getItem('kiaOrders')) || [];
        let adminSettings = JSON.parse(localStorage.getItem('kiaAdminSettings')) || {
            username: "admin",
            password: "admin123",
            name: "Admin",
            email: "admin@kia.uz",
            phone: "+998901234567"
        };
        
        let siteContent = JSON.parse(localStorage.getItem('kiaSiteContent')) || {
            title: "Kia - Har bir safaringizga ishonch",
            description: "Zamonaviy dizayn, qulaylik va yuqori texnologiyalar birlashgan avtomobillar",
            logo: "https://www.kia.com/content/dam/kia2/uz/en/footer-ci-symbol.svg"
        };

        // Sahifa yuklanganda ishga tushadigan funksiyalar
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });

        // Dasturni ishga tushirish
        function initApp() {
            renderCars();
            setupModelLinks();
            updateAdminStats();
            renderAdminCars();
            renderAdminOrders();
            loadSiteContent();
            setupEventListeners();
        }

        // Hodisalar tinglovchilarini o'rnatish
        function setupEventListeners() {
            // Rasm yuklash va ko'rib chiqish
            document.getElementById('carImageUpload').addEventListener('change', function(event) {
                handleImageUpload(event, 'carImagePreview');
            });
            
            // Yangi logo yuklash va ko'rib chiqish
            document.getElementById('newLogoInput').addEventListener('change', function(event) {
                handleImageUpload(event, 'newLogoPreview');
            });
        }

        // Rasm yuklash va ko'rib chiqish
        function handleImageUpload(event, previewId) {
            const file = event.target.files[0];
            const preview = document.getElementById(previewId);
            
            if (file) {
                if (!file.type.match('image.*')) {
                    alert('Iltimos, faqat rasm fayllarini yuklang!');
                    event.target.value = '';
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        }

        // Sayt kontentini yuklash
        function loadSiteContent() {
            document.getElementById('mainTitle').textContent = siteContent.title;
            document.getElementById('mainDescription').textContent = siteContent.description;
            document.getElementById('siteLogo').src = siteContent.logo;
            document.getElementById('currentLogo').src = siteContent.logo;
            
            // Admin panelidagi inputlarni to'ldirish
            document.getElementById('mainTitleInput').value = siteContent.title;
            document.getElementById('mainDescriptionInput').value = siteContent.description;
            
            // Admin sozlamalarini to'ldirish
            document.getElementById('adminNameInput').value = adminSettings.name;
            document.getElementById('adminEmailInput').value = adminSettings.email;
            document.getElementById('adminPhoneInput').value = adminSettings.phone;
            document.getElementById('adminUserName').textContent = adminSettings.name;
        }

        // Modellarni sahifada ko'rsatish
        function renderCars() {
            const container = document.getElementById('modelsContainer');
            const dropdownMenu = document.getElementById('modelsDropdownMenu');
            
            container.innerHTML = '';
            dropdownMenu.innerHTML = '';
            
            if (cars.length === 0) {
                container.innerHTML = '<div class="col-12 text-center"><p>Hozircha avtomobillar mavjud emas</p></div>';
                return;
            }
            
            cars.forEach(car => {
                // Asosiy sahifaga avtomobil kartasi qo'shish
                const carCard = `
                    <div class="col-md-4 mb-4">
                        <div class="card car-card">
                            <img src="${car.image}" class="card-img-top" alt="${car.name}">
                            <div class="card-body">
                                <h5 class="card-title">${car.name}</h5>
                                <p class="card-text">${car.description.substring(0, 100)}...</p>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span class="text-primary fw-bold">${car.price}</span>
                                    <button class="btn btn-kia btn-sm" onclick="showModelInfo(${car.id})">Batafsil</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += carCard;
                
                // Dropdown menyuga model qo'shish
                const dropdownItem = `<li><a class="dropdown-item" href="#" data-model="${car.name.toLowerCase()}">${car.name}</a></li>`;
                dropdownMenu.innerHTML += dropdownItem;
            });
            
            // Model linklarini qayta sozlash
            setupModelLinks();
        }

        // Model haqida ma'lumot ko'rsatish
        function showModelInfo(carId) {
            const car = cars.find(c => c.id === carId);
            if (car) {
                document.getElementById('modelName').textContent = car.name;
                document.getElementById('modelDescription').textContent = car.description;
                document.getElementById('modelPrice').textContent = car.price;
                document.getElementById('modelYear').textContent = car.year;
                document.getElementById('modelEngine').textContent = car.engine;
                document.getElementById('modelTransmission').textContent = car.transmission;
                document.getElementById('modelDetailImage').src = car.image;
                document.getElementById('selectedCarModel').value = car.name;
                
                document.getElementById('modelInfoSection').style.display = 'block';
                
                // Sahifani model ma'lumotlari qismiga aylantiramiz
                document.getElementById('modelInfoSection').scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Model linklarini sozlash
        function setupModelLinks() {
            const modelLinks = document.querySelectorAll('[data-model]');
            modelLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const modelName = this.getAttribute('data-model');
                    const car = cars.find(c => c.name.toLowerCase() === modelName);
                    if (car) {
                        showModelInfo(car.id);
                    }
                });
            });
        }

        // Buyurtma yuborish
        function submitOrder() {
            const name = document.getElementById('customerName').value;
            const phone = document.getElementById('customerPhone').value;
            const email = document.getElementById('customerEmail').value;
            const comment = document.getElementById('customerComment').value;
            const carModel = document.getElementById('selectedCarModel').value;
            
            if (!name || !phone) {
                alert('Iltimos, ism va telefon raqamingizni kiriting!');
                return;
            }
            
            // Buyurtma yaratish
            const newOrder = {
                id: orders.length > 0 ? Math.max(...orders.map(o => o.id)) + 1 : 1,
                name: name,
                phone: phone,
                email: email,
                carModel: carModel,
                comment: comment,
                date: new Date().toLocaleDateString('uz-UZ'),
                status: 'Yangi'
            };
            
            orders.push(newOrder);
            localStorage.setItem('kiaOrders', JSON.stringify(orders));
            
            // Telegramga xabar yuborish (simulyatsiya)
            sendToTelegram(name, phone, email, carModel, comment);
            
            // Modalni yopish
            const modal = bootstrap.Modal.getInstance(document.getElementById('orderModal'));
            modal.hide();
            
            // Formani tozalash
            document.getElementById('orderForm').reset();
            
            alert('Buyurtmangiz qabul qilindi! Tez orada siz bilan bog\'lanamiz.');
            
            // Admin statistikasini yangilash
            updateAdminStats();
            renderAdminOrders();
        }

        // Telegramga xabar yuborish (simulyatsiya)
        function sendToTelegram(name, phone, email, carModel, comment) {
            console.log('Telegramga xabar yuborildi:');
            console.log('Ism:', name);
            console.log('Telefon:', phone);
            console.log('Email:', email);
            console.log('Model:', carModel);
            console.log('Izoh:', comment);
            
            // Haqiqiy loyihada bu yerda Telegram Bot API dan foydalaniladi
        }

        // Admin kirish modali
        function openLoginModal() {
            const loginModal = new bootstrap.Modal(document.getElementById('loginModal'));
            loginModal.show();
        }

        // Admin login
        function adminLogin() {
            const login = document.getElementById('adminLogin').value;
            const password = document.getElementById('adminPassword').value;
            
            if (login === adminSettings.username && password === adminSettings.password) {
                // Modalni yopish
                const modal = bootstrap.Modal.getInstance(document.getElementById('loginModal'));
                modal.hide();
                
                // Admin panelini ochish
                document.getElementById('mainContent').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                
                // Admin statistikasini yangilash
                updateAdminStats();
                renderAdminCars();
                renderAdminOrders();
            } else {
                alert('Login yoki parol noto‘g‘ri!');
            }
        }

        // Admin panelini yopish
        function logout() {
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
        }

        // Asosiy sahifani ko'rsatish
        function showMainPage() {
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('mainContent').style.display = 'block';
        }

        // Modellar bo'limiga aylantirish
        function scrollToModels() {
            document.getElementById('modelsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Admin bo'limlarini ko'rsatish
        function showAdminSection(section) {
            // Barcha bo'limlarni yashirish
            document.getElementById('adminDashboardSection').style.display = 'none';
            document.getElementById('adminCarsSection').style.display = 'none';
            document.getElementById('adminOrdersSection').style.display = 'none';
            document.getElementById('adminContentSection').style.display = 'none';
            document.getElementById('adminSettingsSection').style.display = 'none';
            
            // Tanlangan bo'limni ko'rsatish
            document.getElementById(`admin${section.charAt(0).toUpperCase() + section.slice(1)}Section`).style.display = 'block';
            
            // Navbarni yangilash
            document.querySelectorAll('.admin-nav-link').forEach(link => {
                link.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }

        // Admin statistikasini yangilash
        function updateAdminStats() {
            document.getElementById('totalCars').textContent = cars.length;
            document.getElementById('totalOrders').textContent = orders.length;
            document.getElementById('confirmedOrders').textContent = orders.filter(o => o.status === 'Tasdiqlangan').length;
            document.getElementById('pendingOrders').textContent = orders.filter(o => o.status === 'Yangi').length;
            
            // So'ngi buyurtmalar
            const recentOrders = orders.slice(-3).reverse();
            const recentOrdersHtml = recentOrders.map(order => `
                <tr>
                    <td>${order.name}</td>
                    <td>${order.carModel}</td>
                    <td>${order.date}</td>
                </tr>
            `).join('');
            document.getElementById('recentOrders').innerHTML = recentOrdersHtml;
            
            // Ko'p sotilgan modellar
            const modelCounts = {};
            orders.forEach(order => {
                if (modelCounts[order.carModel]) {
                    modelCounts[order.carModel]++;
                } else {
                    modelCounts[order.carModel] = 1;
                }
            });
            
            let popularModelsHtml = '';
            for (const model in modelCounts) {
                const count = modelCounts[model];
                const percentage = orders.length > 0 ? (count / orders.length) * 100 : 0;
                popularModelsHtml += `
                    <div class="mb-3">
                        <div class="d-flex justify-content-between">
                            <span>${model}</span>
                            <span>${count} ta</span>
                        </div>
                        <div class="progress mb-2">
                            <div class="progress-bar" role="progressbar" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                `;
            }
            document.getElementById('popularModels').innerHTML = popularModelsHtml || '<p>Hozircha buyurtmalar mavjud emas</p>';
        }

        // Admin avtomobillar ro'yxatini ko'rsatish
        function renderAdminCars() {
            const container = document.getElementById('adminCarsList');
            container.innerHTML = '';
            
            if (cars.length === 0) {
                container.innerHTML = '<tr><td colspan="7" class="text-center">Avtomobillar mavjud emas</td></tr>';
                return;
            }
            
            cars.forEach(car => {
                const carRow = `
                    <tr>
                        <td>${car.id}</td>
                        <td><img src="${car.image}" height="40" style="object-fit: cover;"></td>
                        <td>${car.name}</td>
                        <td>${car.price}</td>
                        <td>${car.year}</td>
                        <td><span class="badge bg-success">Faol</span></td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1" onclick="editCar(${car.id})">Tahrirlash</button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteCar(${car.id})">O'chirish</button>
                        </td>
                    </tr>
                `;
                container.innerHTML += carRow;
            });
        }

        // Admin buyurtmalar ro'yxatini ko'rsatish
        function renderAdminOrders() {
            const container = document.getElementById('adminOrdersList');
            container.innerHTML = '';
            
            if (orders.length === 0) {
                container.innerHTML = '<tr><td colspan="8" class="text-center">Buyurtmalar mavjud emas</td></tr>';
                return;
            }
            
            orders.forEach(order => {
                const statusClass = order.status === 'Yangi' ? 'bg-warning' : 'bg-success';
                const statusText = order.status === 'Yangi' ? 'Yangi' : 'Tasdiqlangan';
                
                const orderRow = `
                    <tr>
                        <td>${order.id}</td>
                        <td>${order.name}</td>
                        <td>${order.phone}</td>
                        <td>${order.email || '-'}</td>
                        <td>${order.carModel}</td>
                        <td>${order.date}</td>
                        <td><span class="badge ${statusClass}">${statusText}</span></td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary me-1" onclick="viewOrder(${order.id})">Batafsil</button>
                            <button class="btn btn-sm btn-outline-danger" onclick="deleteOrder(${order.id})">O'chirish</button>
                        </td>
                    </tr>
                `;
                container.innerHTML += orderRow;
            });
        }

        // Yangi avtomobil qo'shish
        function addCar() {
            const name = document.getElementById('carName').value;
            const price = document.getElementById('carPrice').value;
            const year = document.getElementById('carYear').value;
            const engine = document.getElementById('carEngine').value;
            const transmission = document.getElementById('carTransmission').value;
            const color = document.getElementById('carColor').value;
            const description = document.getElementById('carDescription').value;
            const imageFile = document.getElementById('carImageUpload').files[0];
            
            if (!name || !price || !year || !engine || !transmission || !color || !description || !imageFile) {
                alert('Iltimos, barcha maydonlarni to\'ldiring va rasm yuklang!');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const newCar = {
                    id: cars.length > 0 ? Math.max(...cars.map(c => c.id)) + 1 : 1,
                    name: name,
                    price: price,
                    year: year,
                    engine: engine,
                    transmission: transmission,
                    color: color,
                    image: e.target.result, // Base64 formatida rasm
                    description: description
                };
                
                cars.push(newCar);
                localStorage.setItem('kiaCars', JSON.stringify(cars));
                
                // Modalni yopish
                const modal = bootstrap.Modal.getInstance(document.getElementById('addCarModal'));
                modal.hide();
                
                // Formani tozalash
                document.getElementById('addCarForm').reset();
                document.getElementById('carImagePreview').style.display = 'none';
                
                // Yangilash
                renderCars();
                renderAdminCars();
                updateAdminStats();
                
                alert('Yangi avtomobil muvaffaqiyatli qo\'shildi!');
            };
            reader.readAsDataURL(imageFile);
        }

        // Avtomobilni tahrirlash
        function editCar(carId) {
            alert('Tahrirlash funksiyasi ishga tushadi. Avtomobil ID: ' + carId);
            // Bu yerda tahrirlash funksiyasi bo'ladi
        }

        // Avtomobilni o'chirish
        function deleteCar(carId) {
            if (confirm('Haqiqatan ham ushbu avtomobilni o\'chirmoqchimisiz?')) {
                cars = cars.filter(c => c.id !== carId);
                localStorage.setItem('kiaCars', JSON.stringify(cars));
                
                // Yangilash
                renderCars();
                renderAdminCars();
                updateAdminStats();
                
                alert('Avtomobil muvaffaqiyatli o\'chirildi!');
            }
        }

        // Buyurtmani ko'rish
        function viewOrder(orderId) {
            const order = orders.find(o => o.id === orderId);
            if (order) {
                let orderDetails = `Buyurtma ID: ${order.id}\n`;
                orderDetails += `Ism: ${order.name}\n`;
                orderDetails += `Telefon: ${order.phone}\n`;
                orderDetails += `Email: ${order.email || 'Mavjud emas'}\n`;
                orderDetails += `Avtomobil: ${order.carModel}\n`;
                orderDetails += `Sana: ${order.date}\n`;
                orderDetails += `Holati: ${order.status}\n`;
                orderDetails += `Izoh: ${order.comment || 'Mavjud emas'}`;
                
                alert(orderDetails);
            }
        }

        // Buyurtmani o'chirish
        function deleteOrder(orderId) {
            if (confirm('Haqiqatan ham ushbu buyurtmani o\'chirmoqchimisiz?')) {
                orders = orders.filter(o => o.id !== orderId);
                localStorage.setItem('kiaOrders', JSON.stringify(orders));
                
                // Yangilash
                renderAdminOrders();
                updateAdminStats();
                
                alert('Buyurtma muvaffaqiyatli o\'chirildi!');
            }
        }

        // Kontentni saqlash
        function saveContent() {
            const title = document.getElementById('mainTitleInput').value;
            const description = document.getElementById('mainDescriptionInput').value;
            
            siteContent.title = title;
            siteContent.description = description;
            
            localStorage.setItem('kiaSiteContent', JSON.stringify(siteContent));
            
            // Asosiy sahifani yangilash
            document.getElementById('mainTitle').textContent = title;
            document.getElementById('mainDescription').textContent = description;
            
            alert('Kontent muvaffaqiyatli saqlandi!');
        }

        // Logoni yuklash
        function uploadLogo() {
            const logoFile = document.getElementById('newLogoInput').files[0];
            
            if (!logoFile) {
                alert('Iltimos, logo faylini yuklang!');
                return;
            }
            
            if (!logoFile.type.match('image.*')) {
                alert('Iltimos, faqat rasm fayllarini yuklang!');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                siteContent.logo = e.target.result;
                localStorage.setItem('kiaSiteContent', JSON.stringify(siteContent));
                
                // Logoni yangilash
                document.getElementById('siteLogo').src = e.target.result;
                document.getElementById('currentLogo').src = e.target.result;
                document.getElementById('newLogoPreview').style.display = 'none';
                
                alert('Logo muvaffaqiyatli yangilandi!');
            };
            reader.readAsDataURL(logoFile);
        }

        // Profil ma'lumotlarini saqlash
        function saveProfile() {
            const name = document.getElementById('adminNameInput').value;
            const email = document.getElementById('adminEmailInput').value;
            const phone = document.getElementById('adminPhoneInput').value;
            
            adminSettings.name = name;
            adminSettings.email = email;
            adminSettings.phone = phone;
            
            localStorage.setItem('kiaAdminSettings', JSON.stringify(adminSettings));
            
            // Admin ismini yangilash
            document.getElementById('adminUserName').textContent = name;
            
            alert('Profil ma\'lumotlari muvaffaqiyatli saqlandi!');
        }

        // Parolni o'zgartirish
        function changePassword() {
            const currentPassword = document.getElementById('currentPasswordInput').value;
            const newPassword = document.getElementById('newPasswordInput').value;
            const confirmPassword = document.getElementById('confirmPasswordInput').value;
            
            if (currentPassword !== adminSettings.password) {
                alert('Joriy parol noto\'g\'ri!');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                alert('Yangi parol va tasdiqlash paroli mos kelmadi!');
                return;
            }
            
            adminSettings.password = newPassword;
            localStorage.setItem('kiaAdminSettings', JSON.stringify(adminSettings));
            
            document.getElementById('passwordForm').reset();
            
            alert('Parol muvaffaqiyatli o\'zgartirildi!');
        }

        // Excelga yuklab olish
        function exportToExcel() {
            try {
                showLoading('Excel fayli tayyorlanmoqda...');
                
                // Avtomobillar ma'lumotlarini tayyorlash
                const carData = cars.map(car => ({
                    'ID': car.id,
                    'Model': car.name,
                    'Narx': car.price,
                    'Yil': car.year,
                    'Dvigatel': car.engine,
                    'Uzatmalar qutisi': car.transmission,
                    'Rang': car.color
                }));
                
                // Buyurtmalar ma'lumotlarini tayyorlash
                const orderData = orders.map(order => ({
                    'ID': order.id,
                    'Ism': order.name,
                    'Telefon': order.phone,
                    'Email': order.email || 'Mavjud emas',
                    'Avtomobil': order.carModel,
                    'Sana': order.date,
                    'Holati': order.status,
                    'Izoh': order.comment || 'Mavjud emas'
                }));
                
                // Yangi ish kitobi yaratish
                const wb = XLSX.utils.book_new();
                
                // Avtomobillar varaqasini yaratish
                const carWs = XLSX.utils.json_to_sheet(carData);
                XLSX.utils.book_append_sheet(wb, carWs, 'Avtomobillar');
                
                // Buyurtmalar varaqasini yaratish
                const orderWs = XLSX.utils.json_to_sheet(orderData);
                XLSX.utils.book_append_sheet(wb, orderWs, 'Buyurtmalar');
                
                // Excel faylini yaratish va yuklab olish
                const fileName = `kia_malumotlari_${new Date().toLocaleDateString('uz-UZ')}.xlsx`;
                
                // Qisqa kutish (ko'rsatkichni ko'rsatish uchun)
                setTimeout(() => {
                    XLSX.writeFile(wb, fileName);
                    hideLoading();
                    alert('Excel fayli muvaffaqiyatli yuklab olindi!');
                }, 1000);
                
            } catch (error) {
                console.error('Excel eksport qilishda xato:', error);
                hideLoading();
                alert('Excel faylini yuklab olishda xato yuz berdi. Iltimos, qayta urinib ko\'ring.');
            }
        }

        // CSV formatida eksport qilish
        function exportToCSV() {
            try {
                showLoading('CSV fayli tayyorlanmoqda...');
                
                // Buyurtmalar ma'lumotlarini CSV formatiga o'tkazish
                const orderData = orders.map(order => 
                    `"${order.id}","${order.name}","${order.phone}","${order.email || ''}","${order.carModel}","${order.date}","${order.status}","${order.comment || ''}"`
                ).join('\n');
                
                // CSV sarlavhasi
                const header = '"ID","Ism","Telefon","Email","Avtomobil","Sana","Holati","Izoh"\n';
                
                // CSV ma'lumotlarini birlashtirish
                const csv = header + orderData;
                
                // Blob yaratish
                const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
                
                // Yuklab olish havolasini yaratish
                const link = document.createElement('a');
                const url = URL.createObjectURL(blob);
                link.setAttribute('href', url);
                link.setAttribute('download', `kia_buyurtmalari_${new Date().toLocaleDateString('uz-UZ')}.csv`);
                link.style.visibility = 'hidden';
                
                // Qisqa kutish (ko'rsatkichni ko'rsatish uchun)
                setTimeout(() => {
                    // Havolani bosish va olib tashlash
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    hideLoading();
                    alert('CSV fayli muvaffaqiyatli yuklab olindi!');
                }, 1000);
                
            } catch (error) {
                console.error('CSV eksport qilishda xato:', error);
                hideLoading();
                alert('CSV faylini yuklab olishda xato yuz berdi. Iltimos, qayta urinib ko\'ring.');
            }
        }

        // Yuklash ko'rsatkichi
        function showLoading(text = 'Yuklanmoqda...') {
            document.getElementById('loadingText').textContent = text;
            document.getElementById('loadingIndicator').style.display = 'flex';
        }

        function hideLoading() {
            document.getElementById('loadingIndicator').style.display = 'none';
        }
    </script>
</body>
</html>